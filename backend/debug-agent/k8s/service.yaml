apiVersion: v1
kind: Service
metadata:
  name: debug-agent
  labels:
    app: debug-agent
spec:
  selector:
    app: debug-agent
  ports:
  - port: 8001
    targetPort: 8001
    protocol: TCP
    name: http
  type: ClusterIP

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: debug-agent-config
data:
  PORT: "8001"
  DAPR_ENABLED: "true"
  KAFKA_ENABLED: "true"
  LOG_LEVEL: "INFO"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: debug-agent-health-check
data:
  health-check.sh: |
    #\!/bin/bash
    curl -f http://debug-agent:8001/health || exit 1
